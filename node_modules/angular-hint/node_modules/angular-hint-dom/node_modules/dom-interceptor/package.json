{
  "name": "dom-interceptor",
  "version": "0.5.0",
  "description": "patch DOM APIs to intercept calls to them",
  "main": "dom-interceptor.js",
  "scripts": {
    "test": "karma start karma-sauce.conf.js"
  },
  "repository": {
    "type": "git",
    "url": "https://github.com/angular/dom-interceptor.git"
  },
  "keywords": [
    "dom",
    "patch",
    "api",
    "intercept",
    "hacks"
  ],
  "author": {
    "name": "Erin Altenhof-Long",
    "email": "ealtenhof@google.com"
  },
  "license": "Apache 2.0",
  "bugs": {
    "url": "https://github.com/angular/dom-interceptor/issues"
  },
  "homepage": "https://github.com/angular/dom-interceptor",
  "devDependencies": {
    "karma": "0.12.16",
    "karma-sauce-launcher": "~0.2.0",
    "karma-jasmine": "0.1.5",
    "karma-chrome-launcher": "^0.1.4",
    "karma-coverage": "~0.1.4",
    "karma-firefox-launcher": "~0.1.3"
  },
  "dependencies": {
    "browserify": "^4.2.0",
    "gulp": "^3.8.6",
    "karma-bro": "^0.6.0",
    "karma-firefox-launcher": "^0.1.3",
    "karma-safari-launcher": "^0.1.1",
    "watchify": "^0.10.2"
  },
  "readme": "# dom interceptor [![Build Status](https://travis-ci.org/angular/dom-interceptor.svg?branch=master)](https://travis-ci.org/angular/dom-interceptor) [![Code Climate](https://codeclimate.com/github/angular/dom-interceptor/badges/gpa.svg)](https://codeclimate.com/github/angular/dom-interceptor)\n\n  - [Background](#background)\n  - [API](#api)\n\nSee the [NPM module](https://www.npmjs.org/package/dom-interceptor).\n\n##<a name=\"background\"></a> Background\n\nThis library is designed for use with [AngularHintDom](https://github.com/angular/angular-hint-dom), a runtime hinting tool that depends on detecting manipulation of the `DOM` in AngularJS applications to warn developers about best practices. The goal of this\nlibrary is to explore different ways of 'intercepting' or patching `DOM` APIs in order to provide this hinting.\n\nTo provide this service, the library creates a main `manipulationListener` that is used by AngularHintDom. This listener is the `interceptor` that listens for use of certain DOM APIs.\n\nPreviously this library contained other methods for patching individual element properties and using proxies that are not used by the current `manipulationListener`. These methods were developed as part of an exploration of how to effectively listen for DOM manipulation.\n\nEspecially, the library aims to detect the use of methods such as:\n  - retrieval methods such as `document.getElementById()`\n  - `element.remove`\n  - `element.insertBefore`\n  - `element.appendChild`\n\nOriginally, other manipulative methods like `element.innerHTML` and `element.parentElement` were also identified as goal methods for the overall `manipulationListener` to detect. However, detecting these DOM APIs in certain browsers requires patching of individual elements (Firefox attaches properties like `.innerHTML` to `Element.prototype` so patching get/set properties of the prototypes would be sufficient in that browser). In an earlier iteration, methods `patchExistingElements()` and `patchElementProperties()` were implemented to fill this need. However, for the best effort goal of detecting DOM manipulation, patching individual elements was deemed too heavy-handed, dangerous, and costly in terms of performance. For example, some browsers such\nas Safari do not allow the patching of element properties. Moreover, these patched elements do not have the same behavior as unpatched elements.\n\nA better solution than patchExistingElements() or patchElementProperties() for providing this interception on\nthe level of individual elements is to use proxies. In one iteration, the method `patchAccess()` used the [harmony-reflect library](https://github.com/tvcutsem/harmony-reflect) to provide this service.\n\nHowever, proxies are still considered experimental javascript. In Chrome for instance this javascript feature can only be enabled by setting the flag `chrome://flags/#enable-javascript-harmony`. Hence, these features are not used be the current `manipulationListener`. Instead, the manipulationListener provides a 'best-effort' detection of the majority of DOM API calls\nby patching functions on the prototypes of `Element`, `Node`, and `Document`.\n\n##<a name=\"api\"></a> API\n\n####[addManipulationListener](https://github.com/angular/dom-interceptor/blob/master/dom-interceptor.js#L7)\n----------------\n#####Use as: addManipulationListener(newListener)\n\nAdd a `listener` - a function - that will be fired when use of DOM APIs is detected.\n\n####Example\n\n```javascript\nvar domInterceptor = require('dom-interceptor');\nvar listenerFunction = function(message) {\n  console.log(message);\n};\n//Will console.log the given message when manipulation is detected\ndomInterceptor.addManipulationListener(listenerFunction);\n```\n\n####Params\nParam | Type | Description\n---   | ---  | ---\nnewListener | function | A function that will be triggered when use of DOM APIs is detected\n\n\n####[enableLineNumbers](https://github.com/angular/dom-interceptor/blob/master/dom-interceptor.js#L38)\n----------------\n#####Use as: enableLineNumbers(stackTraceLocation)\n\nEnable the listener message passed to the given listener to include the line number of the call that\nmanipulated the DOM. A `stackTraceLocation` is required in order to pick a line from the stack\ntrace that is not within the domInterceptor code.\n\n####Example\n\n```javascript\nvar domInterceptor = require('dom-interceptor');\ndomInterceptor.enableLineNumbers(3);\n```\n\n####Params\nParam | Type | Description\n---   | ---  | ---\nstackTraceLocation | number | The line of the stack trace that is of interest to the user\n\n####[patchOnePrototype](https://github.com/angular/dom-interceptor/blob/master/dom-interceptor.js#L79)\n----------------\n#####Use as: patchOnePrototype(type, typeName)\n\nPatch all functions on a given type.prototype to trigger the manipulationListener when called.\n\n####Example\n\n```javascript\nvar domInterceptor = require('dom-interceptor');\ndomInterceptor.patchOnePrototype(Document, 'Document');\n//Triggers the manipulationListener\ndocument.getElementById('foo');\n```\n\n####Params\nParam | Type | Description\n---   | ---  | ---\ntype| function | A function whose prototype should be patched.\ntypeName | String | The string name of the function whose prototype should be patched\n\n####[removeManipulationListener](https://github.com/angular/dom-interceptor/blob/master/dom-interceptor.js#L153)\n----------------\n#####Use as: removeManipulationListener()\n\nRemove the manipulationListener.\n\n####Example\n\n```javascript\nvar domInterceptor = require('dom-interceptor');\nvar listenerFunction = function(message) {\n  console.log(message);\n};\n//Will console.log the given message when manipulation is detected\ndomInterceptor.addManipulationListener(listenerFunction);\n//triggers console.log\ndocument.getElementById('foo');\n\ndomInterceptor.removeManipulationListener();\n//does not trigger console.log\ndocument.getElementById('foo');\n```\n\n####[unpatchOnePrototype](https://github.com/angular/dom-interceptor/blob/master/dom-interceptor.js#L166)\n----------------\n#####Use as: unpatchOnePrototype(type, typeName)\n\nUnpatch all functions on a given type.prototype that had been patched to trigger the manipulationListener.\n\n####Example\n\n```javascript\nvar domInterceptor = require('dom-interceptor');\ndomInterceptor.patchOnePrototype(Document, 'Document');\n//Triggers the manipulationListener\ndocument.getElementById('foo');\ndomInterceptor.unpatchOnePrototype(Document, 'Document');\n//Does not trigger the manipulationListener\ndocument.getElementById('foo');\n```\n\n####Params\nParam | Type | Description\n---   | ---  | ---\ntype| function | A function whose prototype should be unpatched.\ntypeName | String | The string name of the function whose prototype should be unpatched\n\n## License\nApache 2.0\n",
  "readmeFilename": "README.md",
  "_id": "dom-interceptor@0.5.0",
  "dist": {
    "shasum": "d3779bc477b953d4552b9f61ab44eb7fd2ae2ab9"
  },
  "_from": "dom-interceptor@>=0.4.0",
  "_resolved": "https://registry.npmjs.org/dom-interceptor/-/dom-interceptor-0.5.0.tgz"
}
