<div class="modal fade bs-example-modal-lg" id="journeyModal" tabindex="-1" role="dialog"
     aria-labelledby="journeyModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg modal_journey">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">
                    <span aria-hidden="true">&times;</span>
                    <span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="myModalLabel">Parcours pour la course {{selectedJourney.Run.name}}</h4>
            </div>
            <div class="row">
                <div class="modal-body">
                    <div class="col-xs-12 col-sm-12 col-md-12">
                        <tabset>
                            <tab heading="Voyage">
                                <div class="col-xs-12 col-sm-12 col-md-12 head">
                                    <div class="panel panel-default">
                                        <div class="panel-heading clearfix">
                                            <div class="panel-title col-xs-12 col-sm-10 col-md-10">
                                                <strong>Départ de {{selectedJourney.address_start}}</strong>
                                            </div>
                                            <div class="panel-title col-xs-12 col-sm-2 col-md-2">
                                                {{selectedJourney.journey_type | capitalize}}
                                            </div>
                                        </div>
                                        <div class="panel-body">
                                            <div class="col-xs-12 col-sm-6 col-md-6">
                                                <div class="col-xs-12 col-sm-12 col-md-12">
                                                    <i class="fa fa-arrows-h "></i> {{selectedJourney.distance}}
                                                </div>
                                                <div class="col-xs-12 col-sm-12 col-md-12">
                                                    <i class="fa fa-history"></i> {{selectedJourney.duration}}
                                                </div>
                                                <div class="col-xs-12 col-sm-12 col-md-12">
                                                    <i class="fa fa-car"></i> {{selectedJourney.car_type | capitalize}}
                                                </div>
                                            </div>
                                            <div class="col-xs-12 col-sm-6 col-md-6">
                                                <div class="price">
                                                    {{selectedJourney.amount | currency:'€ '}}
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="panel panel-default" ng-if="(selectedJourney.journey_type === 'aller-retour' || selectedJourney.journey_type === 'aller') && selectedJoin.nb_place_outward">
                                        <div class="panel-heading clearfix">
                                            <span><strong>Aller</strong></span>
                                        </div>
                                        <div class="panel-body">
                                            <div class="col-xs-6 col-sm-6 col-md-6">
                                                <p><i class="glyphicon glyphicon-calendar"></i> {{selectedJourney.date_start_outward | date:'dd/MM/yyyy'}} {{selectedJourney.time_start_outward}}</p>
                                            </div>
                                            <div class="col-xs-6 col-sm-6 col-md-6" ng-if="selectedJoin">
                                                <span class="pull-right">{{selectedJoin.nb_place_outward}} place(s) réservée(s)</span>
                                            </div>
                                            <div class="col-xs-6 col-sm-6 col-md-6" ng-if="selectedJourney.nb_free_place_outward !== null && selectedJoin === null"">
												<span class="pull-right">{{selectedJourney.nb_free_place_outward}} place(s) restantes(s)</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="panel panel-default" ng-if="(selectedJourney.journey_type === 'aller-retour' || selectedJourney.journey_type === 'retour') && selectedJoin.nb_place_return">
                                        <div class="panel-heading clearfix">
                                            <span><strong>Retour</strong></span>
                                        </div>
                                        <div class="panel-body">
                                            <div class="col-xs-6 col-sm-6 col-md-6">
                                                <p><i class="glyphicon glyphicon-calendar"></i> {{selectedJourney.date_start_return | date:'dd/MM/yyyy'}} {{selectedJourney.time_start_return}}</p>
                                            </div>
                                            <div class="col-xs-6 col-sm-6 col-md-6" ng-if="selectedJoin">
                                                <span class="pull-right journey_space_positive">{{selectedJoin.nb_place_return}} place(s) réservée(s)</span>
                                            </div>
                                            <div class="col-xs-6 col-sm-6 col-md-6" ng-if="selectedJourney.nb_free_place_return !== null && selectedJoin === null">
												<span class="pull-right journey_space_positive">{{selectedJourney.nb_free_place_return}} place(s) restantes(s)</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="panel panel-default">
                                        <div class="panel-heading clearfix">
                                            <span><strong>Conducteur</strong></span>
                                        </div>
                                        <div class="panel-body">
                                            <div class="col-xs-12 col-sm-12 col-md-12">
                                                <p><i class="fa fa-automobile"></i> {{selectedJourney.User.firstname | capitalize}} {{selectedJourney.User.lastname | capitalize}}</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </tab>
                            <tab heading="Discussion">
                                <div class="hidden-xs col-sm-3 col-md-3 head">
                                    <ul class="list-group discussion_users">
                                        <li class="list-group-item" ng-repeat="user in discussionUsers">
                                            <img ng-src="{{user.picture}}" class="img-rounded img-avatar-discussion"> {{user.firstname}} {{user.lastname}}
                                        </li>
                                    </ul>
                                </div>
                                <div class="col-xs-12 col-sm-offset-1 col-sm-8 col-md-offset-1 col-md-8 head">
                                    <div class="panel panel-default">
                                        <div class="panel-body discussion_board">
											<div class="panel panel-default col-xs-9 col-sm-9 col-md-9" ng-class-odd="'pull-left'" ng-class-even="'pull-right'" ng-repeat="message in discussionMessages">
                                                <div class="panel-body discussion_message">
                                                    <div class="panel-body discussion_message">
                                                        <p class="discussion_message_text">{{message.message}}</p>
                                                        <span class="discussion_message_info pull-right">{{message.createdAt | date:'medium'}} by {{message.User.firstname | capitalize}} {{message.User.lastname | capitalize}}</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
									<form name="discussionForm" class="discussion_send" ng-controller="RunnableMyJourneyController" ng-submit='sendMessage()'>
										<div class="input-group">
											<input type="text" class="form-control" placeholder="Entrer votre message" ng-model="newMessageEntry">
											<span class="input-group-btn">
												<button class="btn btn-default" type="submit">Envoyer</button>
											</span>
										</div>
									</form>
                                </div>
                            </tab>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
